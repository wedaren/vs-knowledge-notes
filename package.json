{
   "name": "daily-order",
   "displayName": "Daily Order",
   "description": "VSCode extension for managing your daily order.",
   "version": "1.1.31",
   "engines": {
      "vscode": "^1.97.0"
   },
   "categories": [
      "Other"
   ],
   "icon": "img/icon.png",
   "license": "MIT",
   "publisher": "wedaren",
   "repository": {
      "type": "git",
      "url": "https://github.com/wedaren/vs-knowledge-notes.git"
   },
   "activationEvents": [
      "*"
   ],
   "main": "./dist/extension.js",
   "contributes": {
      "chatParticipants": [
         {
            "id": "daily-order.thinker",
            "fullName": "Thinking Tutorial",
            "name": "thinker",
            "description": "我们一起来探讨一个问题，请帮我理清思路。在接下来的对话中，请你先不要主动回答或提供信息。只有当我明确向你提出问题（例如，以问号结尾的句子直接问你），或者在我陈述完我的想法后，用诸如‘你觉得呢？’、‘你认为这个想法如何？’、‘请给我一些反馈’等方式明确征求你的意见时，你再回答。",
            "isSticky": true
         }
      ],
      "languageModelTools": [
         {
            "name": "daily_order_add_note",
            "displayName": "Add to Today's Note",
            "modelDescription": "每次对话中，总结对话内容添加到今天的笔记中。",
            "canBeReferencedInPrompt": true,
            "toolReferenceName": "addNote",
            "icon": "$(notebook-write)",
            "userDescription": "Appends text to today's note.",
            "inputSchema": {
               "type": "object",
               "properties": {
                  "textToAppend": {
                     "type": "string",
                     "description": "The text content to append to today's note file."
                  }
               },
               "required": [
                  "textToAppend"
               ]
            }
         }
      ],
      "commands": [
         {
            "command": "daily-order.setNotesDir",
            "category": "Daily Order",
            "title": "Set Notes Directory"
         },
         {
            "command": "daily-order.noteExplorer.focusOnTodayOrderNote",
            "category": "Daily Order",
            "title": "Focus On Today Order Note"
         },
         {
            "command": "daily-order.noteExplorer.refresh",
            "category": "Daily Order",
            "title": "Refresh Note Explorer",
            "icon": "$(extensions-refresh)"
         },
         {
            "command": "daily-order.noteExplorer.newPrompt",
            "category": "Daily Order",
            "title": "New Prompt",
            "icon": "$(new-file)"
         },
         {
            "command": "daily-order.noteExplorer.newFile",
            "category": "Daily Order",
            "title": "New File",
            "icon": "$(new-file)"
         },
         {
            "command": "daily-order.noteExplorer.newFolder",
            "category": "Daily Order",
            "title": "New Folder",
            "icon": "$(new-folder)"
         },
         {
            "command": "daily-order.noteExplorer.openInNewWindow",
            "category": "Daily Order",
            "title": "Open In New Window",
            "icon": "$(window)"
         },
         {
            "command": "daily-order.noteExplorer.openInIntegratedTerminal",
            "category": "Daily Order",
            "title": "Open In Integrated Terminal"
         },
         {
            "command": "daily-order.noteExplorer.findInFolder",
            "category": "Daily Order",
            "title": "Find in Folder"
         },
         {
            "command": "daily-order.noteExplorer.cut",
            "category": "Daily Order",
            "title": "Cut"
         },
         {
            "command": "daily-order.noteExplorer.copy",
            "category": "Daily Order",
            "title": "Copy"
         },
         {
            "command": "daily-order.noteExplorer.paste",
            "category": "Daily Order",
            "title": "Paste"
         },
         {
            "command": "daily-order.noteExplorer.copyPath",
            "category": "Daily Order",
            "title": "Copy Path"
         },
         {
            "command": "daily-order.noteExplorer.copyRelativePath",
            "category": "Daily Order",
            "title": "Copy Relative Path"
         },
         {
            "command": "daily-order.noteExplorer.rename",
            "category": "Daily Order",
            "title": "Rename"
         },
         {
            "command": "daily-order.noteExplorer.delete",
            "category": "Daily Order",
            "title": "Delete"
         },
         {
            "command": "daily-order.toggleDisplayMode",
            "category": "Daily Order",
            "title": "Toggle Display Mode"
         },
         {
            "command": "daily-order.tagExplorer.refresh",
            "category": "Daily Order",
            "title": "Refresh Tag Explorer",
            "icon": "$(extensions-refresh)"
         },
         {
            "command": "daily-order.searchInNotes",
            "category": "Daily Order",
            "title": "Search In Notes"
         },
         {
            "command": "daily-order.search.toggleMatchCase",
            "category": "Daily Order Search",
            "title": "Toggle Match Case"
         },
         {
            "command": "daily-order.search.toggleWholeWord",
            "category": "Daily Order Search",
            "title": "Toggle Whole Word"
         },
         {
            "command": "daily-order.search.toggleUseRegex",
            "category": "Daily Order Search",
            "title": "Toggle Use Regular Expression"
         },
         {
            "command": "daily-order.toggleGitAutoSave",
            "category": "Daily Order",
            "title": "Toggle Git Auto Save"
         },
         {
            "command": "daily-order.saveToGitNow",
            "category": "Daily Order",
            "title": "Save To Git Now",
            "icon": "$(cloud-upload)"
         },
         {
            "command": "daily-order.setGitAutoSaveInterval",
            "category": "Daily Order",
            "title": "Set Git Auto Save Interval"
         },
         {
            "command": "daily-order.toggleDebugMode",
            "category": "Daily Order",
            "title": "Toggle Debug Mode"
         },
         {
            "command": "daily-order.showDebugPanel",
            "category": "Daily Order",
            "title": "Show Debug Panel"
         },
         {
            "command": "vs-knowledge-notes.openMarkdownLink",
            "title": "Open Markdown Link"
         },
         {
            "command": "daily-order.openSearchResult",
            "title": "Open Search Result"
         },
         {
            "command": "daily-order.clearSearch",
            "title": "Clear Search",
            "category": "Daily Order Search"
         },
         {
            "command": "daily-order.toggleAutoSavePause",
            "title": "Daily Order: Toggle Auto-Save Pause for Notes",
            "category": "Daily Order"
         },
         {
            "command": "daily-order.createNoteFromSelection",
            "category": "Daily Order",
            "title": "从选中文本新建笔记"
         }
      ],
      "keybindings": [
         {
            "command": "daily-order.noteExplorer.findInFolder",
            "key": "shift+alt+f",
            "when": "focusedView == daily-order.noteExplorer && !inputFocus && viewItem == daily-order.Directory"
         },
         {
            "command": "daily-order.noteExplorer.cut",
            "key": "ctrl+x",
            "when": "focusedView == daily-order.noteExplorer && !inputFocus"
         },
         {
            "command": "daily-order.noteExplorer.copy",
            "key": "ctrl+c",
            "when": "focusedView == daily-order.noteExplorer && !inputFocus"
         },
         {
            "command": "daily-order.noteExplorer.paste",
            "key": "ctrl+v",
            "when": "focusedView == daily-order.noteExplorer && !inputFocus"
         },
         {
            "command": "daily-order.noteExplorer.copyPath",
            "key": "shift+alt+c",
            "when": "focusedView == daily-order.noteExplorer && !inputFocus"
         },
         {
            "command": "daily-order.noteExplorer.copyRelativePath",
            "key": "ctrl+shift+c",
            "when": "focusedView == daily-order.noteExplorer && !inputFocus"
         },
         {
            "command": "daily-order.noteExplorer.rename",
            "key": "f2",
            "when": "focusedView == daily-order.noteExplorer && !inputFocus"
         },
         {
            "command": "daily-order.noteExplorer.delete",
            "key": "delete",
            "when": "focusedView == daily-order.noteExplorer && !inputFocus"
         },
         {
            "command": "daily-order.noteExplorer.openInNewWindow",
            "key": "cmd+shift+n",
            "mac": "cmd+shift+n",
            "when": "focusedView == daily-order.noteExplorer && !inputFocus && viewItem == daily-order.Directory"
         },
         {
            "command": "daily-order.saveToGitNow",
            "key": "ctrl+alt+s",
            "mac": "cmd+alt+s",
            "when": "config.daily-order.notesDir && editorFocus"
         },
         {
            "command": "daily-order.noteExplorer.focusOnTodayOrderNote",
            "key": "ctrl+t",
            "override": true
         }
      ],
      "views": {
         "DailyOrder": [
            {
               "id": "daily-order.searchInputView",
               "name": "Search Input",
               "type": "webview",
               "icon": "$(search)",
               "when": "config.daily-order.notesDir"
            },
            {
               "id": "daily-order.noteExplorer",
               "name": "Note Explorer",
               "icon": "$(files)",
               "contextualTitle": "Note Explorer"
            },
            {
               "id": "daily-order.tagExplorer",
               "name": "Tag Explorer",
               "icon": "$(tag)",
               "contextualTitle": "Tag Explorer"
            },
            {
               "id": "daily-order.searchView",
               "name": "Search Results",
               "icon": "$(search-results)",
               "contextualTitle": "Search Results",
               "when": "config.daily-order.notesDir"
            }
         ],
         "dailyorderpanel": [
            {
               "id": "daily-order.chatView",
               "name": "LLM Chat",
               "type": "webview",
               "icon": "$(comment-discussion)",
               "contextualTitle": "LLM Chat",
               "when": "supportedLLMChat"
            }
         ]
      },
      "viewsContainers": {
         "activitybar": [
            {
               "id": "DailyOrder",
               "title": "Daily Order",
               "icon": "$(output-view-icon)"
            }
         ],
         "panel": [
            {
               "id": "dailyorderpanel",
               "title": "Daily Order Panel",
               "icon": "$(output-view-icon)"
            }
         ]
      },
      "viewsWelcome": [
         {
            "view": "daily-order.noteExplorer",
            "contents": "No notes directory found.\n[Set Notes Directory](command:daily-order.setNotesDir)",
            "when": "!config.daily-order.notesDir"
         },
         {
            "view": "daily-order.noteExplorer",
            "contents": "Loading notes directory.",
            "when": "config.daily-order.notesDir && !daily-order.isEmptyNotesDir"
         },
         {
            "view": "daily-order.noteExplorer",
            "contents": "Notes directory is empty.",
            "when": "config.daily-order.notesDir && daily-order.isEmptyNotesDir"
         },
         {
            "view": "daily-order.tagExplorer",
            "contents": "Loading tags.",
            "when": "config.daily-order.notesDir && !daily-order.isNothingTag"
         },
         {
            "view": "daily-order.tagExplorer",
            "contents": "Tag is nothing.",
            "when": "!config.daily-order.notesDir || daily-order.isNothingTag"
         },
         {
            "view": "daily-order.searchView",
            "contents": "Use the input field above to search your notes.",
            "when": "config.daily-order.notesDir && !dailyOrderSearch.hasResults && !dailyOrderSearch.noResults"
         },
         {
            "view": "daily-order.searchView",
            "contents": "No results found. Try a different search term or adjust search options.",
            "when": "config.daily-order.notesDir && dailyOrderSearch.noResults"
         }
      ],
      "menus": {
         "view/title": [
            {
               "command": "daily-order.noteExplorer.refresh",
               "when": "view == daily-order.noteExplorer",
               "group": "navigation"
            },
            {
               "command": "daily-order.noteExplorer.newFolder",
               "when": "view == daily-order.noteExplorer",
               "group": "navigation"
            },
            {
               "command": "daily-order.noteExplorer.newFile",
               "when": "view == daily-order.noteExplorer",
               "group": "navigation"
            },
            {
               "command": "daily-order.noteExplorer.openInNewWindow",
               "when": "view == daily-order.noteExplorer && config.daily-order.notesDir",
               "group": "navigation"
            },
            {
               "command": "daily-order.saveToGitNow",
               "when": "view == daily-order.noteExplorer && config.daily-order.notesDir",
               "group": "navigation"
            },
            {
               "command": "daily-order.tagExplorer.refresh",
               "when": "view == daily-order.tagExplorer",
               "group": "navigation"
            },
            {
               "command": "daily-order.clearSearch",
               "when": "view == daily-order.searchView && dailyOrderSearch.hasResults",
               "group": "navigation@4",
               "icon": {
                  "light": "$(clear-all)",
                  "dark": "$(clear-all)"
               }
            }
         ],
         "view/item/context": [
            {
               "command": "daily-order.noteExplorer.newPrompt",
               "when": "view == daily-order.noteExplorer && viewItem == daily-order.File",
               "group": "1_creation@1"
            },
            {
               "command": "daily-order.noteExplorer.newFile",
               "when": "view == daily-order.noteExplorer",
               "group": "1_creation@1"
            },
            {
               "command": "daily-order.noteExplorer.newFolder",
               "when": "view == daily-order.noteExplorer",
               "group": "1_creation@2"
            },
            {
               "command": "daily-order.noteExplorer.openInIntegratedTerminal",
               "when": "view == daily-order.noteExplorer",
               "group": "1_creation@3"
            },
            {
               "command": "daily-order.noteExplorer.openInNewWindow",
               "when": "view == daily-order.noteExplorer",
               "group": "1_creation@4"
            },
            {
               "command": "daily-order.noteExplorer.findInFolder",
               "when": "view == daily-order.noteExplorer && viewItem == daily-order.Directory",
               "group": "2_finding@1"
            },
            {
               "command": "daily-order.noteExplorer.cut",
               "when": "view == daily-order.noteExplorer",
               "group": "3_editing@1"
            },
            {
               "command": "daily-order.noteExplorer.copy",
               "when": "view == daily-order.noteExplorer",
               "group": "3_editing@2"
            },
            {
               "command": "daily-order.noteExplorer.paste",
               "when": "view == daily-order.noteExplorer",
               "group": "3_editing@3"
            },
            {
               "command": "daily-order.noteExplorer.copyPath",
               "when": "view == daily-order.noteExplorer",
               "group": "4_path@1"
            },
            {
               "command": "daily-order.noteExplorer.copyRelativePath",
               "when": "view == daily-order.noteExplorer",
               "group": "4_path@2"
            },
            {
               "command": "daily-order.noteExplorer.rename",
               "when": "view == daily-order.noteExplorer",
               "group": "5_modification@1"
            },
            {
               "command": "daily-order.noteExplorer.delete",
               "when": "view == daily-order.noteExplorer",
               "group": "5_modification@2"
            }
         ],
         "editor/context": [
            {
               "command": "daily-order.createNoteFromSelection",
               "when": "editorLangId == markdown && editorHasSelection",
               "group": "navigation@1"
            }
         ],
         "commandPalette": [
            {
               "command": "daily-order.noteExplorer.findInFolder",
               "when": "false"
            },
            {
               "command": "daily-order.openSearchResult",
               "when": "false"
            },
            {
               "command": "daily-order.noteExplorer.cut",
               "when": "false"
            },
            {
               "command": "daily-order.noteExplorer.copy",
               "when": "false"
            },
            {
               "command": "daily-order.noteExplorer.paste",
               "when": "false"
            },
            {
               "command": "daily-order.noteExplorer.copyPath",
               "when": "false"
            },
            {
               "command": "daily-order.noteExplorer.copyRelativePath",
               "when": "false"
            },
            {
               "command": "daily-order.noteExplorer.rename",
               "when": "false"
            },
            {
               "command": "daily-order.noteExplorer.delete",
               "when": "false"
            }
         ],
         "markdown/links": [
            {
               "command": "vs-knowledge-notes.openMarkdownLink",
               "when": "editorLangId == markdown"
            }
         ]
      },
      "configuration": {
         "type": "object",
         "title": "Daily Order Configuration",
         "properties": {
            "daily-order.notesDir": {
               "type": "string",
               "default": null,
               "description": "Directory where notes are saved."
            },
            "daily-order.confirmDelete": {
               "type": "boolean",
               "default": true,
               "description": "Controls whether the explorer should ask for confirmation when deleting a file."
            },
            "daily-order.previewEngine": {
               "type": "string",
               "default": "default",
               "enum": [
                  "default",
                  "enhanced",
                  "disuse"
               ],
               "description": "The engine to use when displaying the preview.",
               "enumDescriptions": [
                  "Use VSCode built-in engine.",
                  "Use markdown-preview-enhanced extension's engine.",
                  "Not display preview. Show file as readonly instead of preview."
               ]
            },
            "daily-order.tagDelimiter": {
               "type": "string",
               "default": "/",
               "description": "A character to delimit tag."
            },
            "daily-order.showHiddenFiles": {
               "type": "boolean",
               "default": false,
               "description": "Controls whether hidden files (starting with a dot) are shown in the note explorer."
            },
            "daily-order.gitAutoSave": {
               "type": "boolean",
               "default": true,
               "description": "自动将笔记变更提交到 Git 仓库并推送。"
            },
            "daily-order.gitAutoSaveInterval": {
               "type": "number",
               "default": 30,
               "description": "Git 自动保存的间隔时间（分钟）。"
            },
            "daily-order.promptsDir": {
               "type": "string",
               "default": "",
               "description": "自定义的 prompts 目录路径。如果为空，将使用笔记目录下的 prompts 文件夹。"
            },
            "daily-order.enableDebug": {
               "type": "boolean",
               "default": false,
               "description": "启用调试模式，将会在输出面板显示详细的调试信息。"
            },
            "daily-order.markdownlintFixAllOnSave": {
               "type": "boolean",
               "default": true,
               "description": "在保存时自动运行 Markdownlint 的 --fix-all 命令。这适用于插件自身的自动保存、用户手动保存以及 VS Code 的 files.autoSave 触发的保存。"
            },
            "daily-order.enableDebugLogging": {
               "type": "boolean",
               "default": false,
               "description": "启用或禁用插件的详细调试日志输出。"
            },
            "daily-order.autoSaveDelay": {
               "type": "number",
               "default": 6666,
               "description": "文本更改后，此扩展的自动保存功能的延迟（毫秒）。如果 'daily-order.markdownlintFixAllOnSave' 为 true，则也用作在 VS Code 内置 'files.autoSave' 事件触发保存后进行 linting 的延迟。（默认值：6666 毫秒）。"
            }
         }
      }
   },
   "extensionDependencies": [
      "yzhang.markdown-all-in-one",
      "davidanson.vscode-markdownlint"
   ],
   "scripts": {
      "vscode:prepublish": "npm run package",
      "compile": "webpack",
      "watch": "webpack --watch",
      "package": "webpack --mode production --devtool hidden-source-map",
      "test-compile": "tsc -p ./",
      "test-watch": "tsc -watch -p ./",
      "pretest": "npm run test-compile && npm run lint",
      "lint": "eslint src --ext ts",
      "lint:fix": "eslint src --ext ts --fix",
      "test": "node ./out/test/runTest.js"
   },
   "devDependencies": {
      "@types/copy-webpack-plugin": "^8.0.0",
      "@types/fs-extra": "^9.0.11",
      "@types/glob": "^7.1.3",
      "@types/js-yaml": "^4.0.1",
      "@types/mocha": "^8.0.4",
      "@types/node": "^12.11.7",
      "@types/vscode": "^1.97.0",
      "@typescript-eslint/eslint-plugin": "^4.14.1",
      "@typescript-eslint/parser": "^4.14.1",
      "copy-webpack-plugin": "^9.1.0",
      "eslint": "^7.19.0",
      "glob": "^7.1.6",
      "mocha": "^10.8.2",
      "ts-loader": "^9.4.4",
      "typescript": "^4.9.5",
      "vscode-test": "^1.5.0",
      "webpack": "^5.96.1",
      "webpack-cli": "^4.4.0"
   },
   "dependencies": {
      "@vscode/ripgrep": "^1.15.11",
      "@vscode/webview-ui-toolkit": "^1.4.0",
      "dayjs": "^1.11.13",
      "escape-string-regexp": "^5.0.0",
      "fs-extra": "^9.1.0",
      "gray-matter": "^4.0.3",
      "lit": "^3.3.0",
      "simple-git": "^3.27.0",
      "trash": "^8.1.1"
   }
}
